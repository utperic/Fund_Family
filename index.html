<!DOCTYPE html>
<html lang="zh-TW" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>家族基金資產管理 </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Noto+Sans+TC:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #0f172a; color: #f1f5f9; }
        .font-tech { font-family: 'Orbitron', sans-serif; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .glow-blue { box-shadow: 0 0 20px rgba(59, 130, 246, 0.2); }
        .gradient-text { background: linear-gradient(90deg, #3b82f6, #2dd4bf); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    </style>
</head>
<body class="p-4 md:p-10">
    <div class="max-w-7xl mx-auto">
        <div class="flex flex-col md:flex-row justify-between items-center mb-10 space-y-4 md:space-y-0 animate__animated animate__fadeInDown">
            <div>
                <h1 class="text-4xl font-bold gradient-text font-tech">FAMILY FUND PRO</h1>
                <p class="text-slate-400 mt-2">資產管理監控系統</p>
            </div>
            <div class="glass px-6 py-3 rounded-2xl flex items-center space-x-4">
                <div class="text-right border-r border-slate-700 pr-4">
                    <p class="text-xs text-slate-500 uppercase">Current NAV</p>
                    <p class="text-amber-400 text-sm font-bold font-tech">10.308</p>
                </div>
                <div>
                    <p class="text-xs text-slate-500 uppercase">Last Update</p>
                    <p class="text-sm">2026-01-25</p>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
            <div class="glass p-6 rounded-3xl glow-blue animate__animated animate__zoomIn">
                <p class="text-slate-400 text-sm mb-1">管理總資產 (AUM)</p>
                <p class="text-3xl font-tech font-bold text-white">$2,064,286</p>
            </div>
            <div class="glass p-6 rounded-3xl animate__animated animate__zoomIn animate__delay-1s">
                <p class="text-slate-400 text-sm mb-1">累計總盈虧 (PnL)</p>
                <p class="text-3xl font-tech font-bold text-emerald-400">+$57,799</p>
            </div>
            <div class="glass p-6 rounded-3xl animate__animated animate__zoomIn animate__delay-2s">
                <p class="text-slate-400 text-sm mb-1">基金累計報酬率</p>
                <p class="text-3xl font-tech font-bold text-blue-400">3.08%</p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-10">
            <div class="glass p-8 rounded-3xl lg:col-span-1">
                <h3 class="text-lg font-bold mb-6 flex items-center">策略配置比例</h3>
                <div class="relative h-64"><canvas id="allocationChart"></canvas></div>
            </div>
            <div class="glass p-8 rounded-3xl lg:col-span-2">
                <h3 class="text-lg font-bold mb-6 flex items-center">單位淨值成長走勢</h3>
                <div class="h-64"><canvas id="performanceChart"></canvas></div>
            </div>
        </div>

        <div class="glass p-8 rounded-3xl overflow-hidden mb-10 animate__animated animate__fadeInUp">
            <h3 class="text-lg font-bold mb-6 flex justify-between items-center">
                <span>股東持倉與成本分析</span>
                <span class="text-xs font-normal text-slate-500">* 平均成本 = 總投入 / 總單位</span>
            </h3>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="text-slate-500 text-sm text-left border-b border-slate-800">
                            <th class="pb-4">股東</th>
                            <th class="pb-4">平均成本淨值</th>
                            <th class="pb-4">投入本金</th>
                            <th class="pb-4">當前價值</th>
                            <th class="pb-4 text-right">損益 (ROI)</th>
                        </tr>
                    </thead>
                    <tbody id="shareholder-rows" class="divide-y divide-slate-800 text-sm md:text-base">
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        const RAW_DATA = {
        "dashboard": [
            { "name": "我 (管理者)", "avg_cost": 9.946, "principal": 1096487, "current": 1136432, "pnl": 39945, "roi": 0.0364 },
            { "name": "雷爸爸", "avg_cost": 9.797, "principal": 100000, "current": 105217, "pnl": 5217, "roi": 0.0522 },
            { "name": "弟弟", "avg_cost": 10.150, "principal": 810000, "current": 822637, "pnl": 12637, "roi": 0.0156 }
        ],
        "strategy": [
            { "name": "國泰股票", "value": 1194287 },
            { "name": "元富選擇權", "value": 510270 },
            { "name": "IB 美股", "value": 359729 }
        ],
        "pnl": [
            { "date": "12/31", "nav": 10.00, "roi": 0.00 },
            { "date": "01/03", "nav": 9.80, "roi": -2.03 },
            { "date": "01/14", "nav": 9.89, "roi": -1.08 },
            { "date": "01/20", "nav": 10.39, "roi": 3.96 },
            { "date": "01/22", "nav": 10.34, "roi": 3.49 },
            { "date": "01/25", "nav": 10.31, "roi": 3.18 }
        ]
    };

        const currentNAV = 10.308;

        // 渲染表格
        const tbody = document.getElementById('shareholder-rows');
        RAW_DATA.dashboard.forEach(s => {
            const isProfit = currentNAV > s.avg_cost;
            const row = `
                <tr class="hover:bg-slate-800/50 transition-colors">
                    <td class="py-5 font-bold text-blue-400">${s.name}</td>
                    <td class="py-5 font-tech ${isProfit ? 'text-emerald-400' : 'text-rose-400'}">
                        ${s.avg_cost.toFixed(3)}
                    </td>
                    <td class="py-5 font-tech text-slate-400">$${s.principal.toLocaleString()}</td>
                    <td class="py-5 font-tech text-white font-bold">$${s.current.toLocaleString()}</td>
                    <td class="py-5 text-right">
                        <span class="text-emerald-400 font-bold">+$${s.pnl.toLocaleString()}</span>
                        <div class="text-xs text-slate-500 font-tech">${(s.roi * 100).toFixed(2)}%</div>
                    </td>
                </tr>`;
            tbody.innerHTML += row;
        });

        // 圓餅圖
        new Chart(document.getElementById('allocationChart'), {
            type: 'doughnut',
            data: {
                labels: RAW_DATA.strategy.map(x => x.name),
                datasets: [{
                    data: RAW_DATA.strategy.map(x => x.value),
                    backgroundColor: ['#3b82f6', '#10b981', '#f59e0b'],
                    borderWidth: 0
                }]
            },
            options: { maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { color: '#94a3b8' } } }, cutout: '75%' }
        });

        // 走勢圖
        new Chart(document.getElementById('performanceChart'), {
            type: 'line',
            data: {
                labels: RAW_DATA.pnl.map(x => x.date),
                datasets: [{
                    label: 'NAV',
                    data: RAW_DATA.pnl.map(x => x.nav),
                    borderColor: '#3b82f6',
                    backgroundColor: 'rgba(59,130,246,0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { grid: { color: '#1e293b' }, ticks: { color: '#94a3b8' } },
                    x: { grid: { display: false }, ticks: { color: '#94a3b8' } }
                }
            }
        });
    </script>
</body>
</html>
